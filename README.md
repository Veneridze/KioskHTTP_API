# KioskHTTP_API
HTTP интерфейс для получения и отправки данных

## Авторизация

Параметры:
- **`mode`** = auth
- **`login`** = Логин
- **`pass`** = Пароль

JSON - Ответ от сервера:

Если данные верны:
```json
{
  "status": "OK",
  "key": "abc123456789"
}
```

Если данные неверны
```json
{
  "status": "INCORRECT"
}
```

## Новости

Параметры:
- **`mode`** = news
- **`key`** = Ключ из auth

JSON - Ответ от сервера:
```json
{
  "status": "OK",
  "news_array": [
    {
      "id": 1,
      "title": "Заголовок первой новости",
      "desc": "Текст первой новости",
      "date": "2021-06-21 00:00:00",
      "lastchange": "ks54.ru",
      "from": "ks54.ru"
    },
    {
      "id": 2,
      "title": "Заголовок второй новости",
      "desc": "Текст второй новости",
      "date": "2021-06-21 00:00:00",
      "lastchange": "vk.com/#####",
      "from": "vk.com/#####"
    }
  ]
}
```

## Список кружков (дополнительное образование)

Параметры:
- **`mode`** = extras
- **`op`** = Номер площадки
- **`key`** = Ключ из auth

JSON - Ответ от сервера:

Справка:
- `status` - открыта ли запись на кружок
- `age` - максимальный возраст ученика
- `teacher` - id преподавателя, информацию можно получить в методе `staff`
- `length` - Продолжительность занятий в днях
```json
{
  "status": "OK",
  "extras": [
    {
      "id": 1,
      "title": "Web-Программирование",
      "about_short": "Программирование для начинающих",
      "about": "Полное описание",
      "teacher": 265,
      "age": 18,
      "length": 14,
      "status": true
    },
    {
      "id": 2,
      "title": "Бисероплетение",
      "about_short": "Это целый мир невероятно интересных возможностей создания маленьких творческих шедевров своими руками",
      "about": "Полное описание",
      "teacher": 265,
      "age": 16,
      "length": 29,
      "status": true
    },
  ]
}
```
## Список администрации

Параметры:
- **`mode`** = staff
- **`op`** = Номер площадки
- **`key`** = Ключ из auth

JSON - Ответ от сервера:

Справка:
- `admin` - относится ли сотрудник к администрации площадки
```json
{
  "status": "OK",
  "staff": [
    {
      "id": 11,
      "name": "Преподаватель А.И.",
      "email": "example@example",
      "post": "МДК 01.02, МДК 03.01",
      "cab": 321,
      "phone": null,
      "admin": false
    },
    {
      "id": 12,
      "name": "Учитель Л.А.",
      "email": null,
      "post": "Основы И.Б., Криптография, Информатика",
      "cab": 123,
      "phone": null,
      "admin": false
    }
   ]
}
```

## Список студсовета

Параметры:
- **`mode`** = studsovet
- **`op`** = Номер площадки
- **`key`** = Ключ из auth

JSON - Ответ от сервера:
```json
{
  "status": "OK",
  "studsovet": [
  {
      "id": 1,
      "name": "Иванов Иван",
      "post": "СМИ",
      "admin": false
    },
    {
      "id": 2,
      "name": "Иванов Максим",
      "post": "Представитель ОП-5",
      "admin": false
    },
  ]
}
```
## Настройки площадки

Параметры:
- **`mode`** = settings
- **`op`** = Номер площадки
- **`key`** = Ключ из auth

JSON - Ответ от сервера:

Справка:
- `number_api` - Номер площадки в API ks54.ru, используется для получения списка групп, может отличаться от номера площадки
- `cab` - Кабинет получения инвентаря (к примеру, шайб для аэрохоккея)
```json
{
  "status": "OK",
  "settings": {
    "name": "Семёновская - 5",
    "number": 5,
    "number_api": 4,
    "week": "Знаменатель",
    "games": true,
    "hokkey_count": 2,
    "cab": 803,
    "studsovet_views": 29,
    "contact_views": 71
  }
}
```

## Информация о пользователе

Параметры:
- **`mode`** = userinfo
- **`key`** = Ключ из auth

JSON - Ответ от сервера:

Справка:
- `vk_id` - название или айди пользователя вконтакте для упоминания пользователя в сообщениях

```json
{
  "status": "OK",
  "userinfo": {
    "login": "User123",
    "name": "Иванов Иван",
    "op": 2,
    "mail": null,
    "vk_id": "slava.kopaev",
    "lastauth": "2021-05-18 17:37:31"
  }
}
```

## Список площадок

Параметры:
- **`mode`** = oplist
- **`key`** = Ключ из auth

JSON - Ответ от сервера:

```json
{
  "status": "OK",
  "op": [
    2,
    4,
    5,
    6,
    7,
    8
  ]
}
```

## Записи на игру (аэрохоккей)

Справка:
- Список записей на игру очищается каждый день

Параметры:
- **`mode`** = gametickets
- **`op`** = Номер площадки
- **`key`** = Ключ из auth

JSON - Ответ от сервера:

```json
{
  "status": "OK",
  "tickets": [
    {
      "id": 1,
      "user_id": "12345678",
      "name": "Иванов Иван",
      "start": "15:30",
      "end": "16:40",
      "group": "1-ОИБТС14-8",
      "regtype": "vk"
    }
    {
      "id": 2,
      "user_id": "Username",
      "name": "Иванов Иван",
      "start": "16:50",
      "end": "17:10",
      "group": "3-ОИБТС6-7",
      "regtype": "tg"
    }
  ]
}
```

## Записи на игру (аэрохоккей)

Справка:
- Список записей на игру очищается каждый день

Параметры:
- **`mode`** = grouplist
- **`op_api`** = API Номер площадки, можно получить из метода `settings`
- **`key`** = Ключ из auth

JSON - Ответ от сервера:

```json
{
  "status": "OK",
  "groups": [
    "1-ИКСС12-1",
    "1-ИКСС31-2"
  ]
}
```

## Расписание звонков

Параметры:
- **`mode`** = timetable
- **`op`** = Номер площадки
- **`key`** = Ключ из auth

JSON - Ответ от сервера:

```json
{
  "status": "OK",
  "timetable": [
    {
      "number": 1,
      "first_start": "09:00",
      "first_end": "09:45",
      "second_start": "09:55",
      "second_end": "10:40"
    },
    {
      "number": 2,
      "first_start": "11:00",
      "first_end": "11:45",
      "second_start": "11:55",
      "second_end": "12:40"
    },
    {
      "number": 3,
      "first_start": "13:00",
      "first_end": "13:45",
      "second_start": "14:05",
      "second_end": "14:50"
    },
    {
      "number": 4,
      "first_start": "15:10",
      "first_end": "15:55",
      "second_start": "16:05",
      "second_end": "16:50"
    }
  ]
}
```
